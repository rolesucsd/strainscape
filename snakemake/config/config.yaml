# iHMP Pipeline Configuration

# Input/Output paths
paths:
  raw_data: "data/raw"
  processed_data: "data/processed"
  results: "data"
  intermediate: "data/intermediate"
  final: "data/final"
  log_dir: "logs"

# Reference data
reference:
  bakta_db: "data/reference/bakta_db"
  genomes: "data/reference/genomes"
  annotations: "data/reference/annotations"
  taxonomy: "data/reference/taxonomy.tsv"

# Metadata files
metadata:
  file: "data/metadata/samples.tsv"
  patients: "data/metadata/patients.tsv"

# Gene trees configuration
gene_trees:
  directory: "data/reference/gene_trees"

# Snakemake configuration
snakemake:
  cores: 4
  memory: "32G"
  use_conda: true

# Python analysis parameters
python:
  min_coverage: 10
  min_quality: 20
  min_frequency: 0.1
  p_threshold: 0.05
  threads: 4

# R analysis parameters
r:
  significance_threshold: 0.05
  plot_width: 12
  plot_height: 8

# Logging
logging:
  level: "INFO"
  max_file_size: "100MB"

# Sample and patient information
samples: !include "samples.yaml"
patients: !include "patients.yaml"

# Analysis parameters
params:
  # Assembly
  min_contig_length: 1000
  min_coverage: 10
  
  # Mapping
  min_mapq: 1
  
  # MAGs
  min_completeness: 50
  max_contamination: 10
  
  # InStrain
  min_coverage: 5
  min_freq: 0.1
  min_scaffold_length: 1000
  min_scaffold_coverage: 5.0
  min_scaffold_breadth: 0.4
  
  # SNP tracking
  snp_tracking:
    min_coverage: 10
    min_freq: 0.05
    p_threshold: 0.05
    min_freq_change: 0.1
    min_trajectory_change: 0.2
    min_slope: 0.01
    min_abs_change: 0.1

# Conda environments
conda_envs:
  qc: "envs/qc.yaml"
  assembly: "envs/assembly.yaml"
  mapping: "envs/mapping.yaml"
  mags: "envs/mags.yaml"
  annotation: "envs/annotation.yaml"
  instrain: "envs/instrain.yaml"

# Resource limits
resources:
  threads: 8
  memory: "32G"
  time: "24:00:00" 